Congress has until midnight on April 28 to pass a spending bill or the federal government will run out of money and close its doors.

While a government shutdown remains a possibility, it is looking unlikely. Appropriators and congressional staffers worked through recess to reach a deal before lawmakers came back to Washington. At the minimum, it looks like Congress will buy some more time by passing a stopgap funding bill, effectively extending the shutdown deadline.

“We’re hopeful that both chambers will complete their work on the spending bill on time,” a Democratic staffer with the Senate Appropriations Committee said. Another GOP congressional aide put the odds of government shutdown somewhere between 5 and 15 percent.

But in the final week, the White House has signaled a harder line on the shutdown fight to ensure funding for Trump’s campaign promises. That doesn’t change the fact that the politics are difficult. Republicans need Democrats to sign on to a funding bill for it to pass, and if recent indications of a renewed health care push are successful, that will only limit Congress’s negotiating time.

It’s not unusual for Congress to go to the brink of shutdown; it happened as recently as this past December, when Democrats threatened a shutdown if Republicans didn’t pass the Miners Protection Act, which would have guarded former miners’ health care and benefits. But it’s rare they actually don’t make the deadline.

“We always wait until the very end of the deadline,” Rep. Mark Meadows (R-NC) said at a Politico event in early April, complaining about Congress’s tendency to wait until the last minute. “It’s like a florist being surprised by Valentine’s Day. I don’t get it.”

This time, it seems both sides of the aisle say they don’t want it to get to that point. But there are still some big political fights to be had. Democrats have made it clear they are willing to push a shutdown fight if Republicans try to defund Planned Parenthood or pay for a border wall.

Ultimately, Democrats have power to sway the outcome of the spending bill — more than their minority party status in the House and Senate would suggest. This means the fight to fund the government could escalate when conservatives get wind of just how many concessions the Republican Party may be willing to make.

Congress is on a tight schedule. It has four days with both chambers in session to strike a spending deal — or agree they need more time to strike a deal.

To prevent shutdown, Congress has the option to 1) pass the appropriations bills, likely in an omnibus, which just crams together 11 appropriations bills into one spending package; 2) pass a “continuing resolution,” or CR, which would fund the government at its current levels, basically buying more time to negotiate the actual appropriations bills; or 3) pass a “CRomnibus,” which is combination of the two, extending the deadline on certain more contentious appropriations — like for the Department of Homeland Security — in addition to passing a spending bill on the rest.

Appropriators and their staffers have been reluctant to describe the current state of negotiations. Leadership staffers in both the House and Senate said it’s too early to tell. But for now, it looks like Congress will likely pass a short-term CR to finish negotiating a bigger omnibus bill.

In early April, Meadows said he thought appropriators would be able to agree on a CRomnibus bill, which would allow Congress to avoid the funding fights over the border wall with a CR for the Department of Homeland Security but let spending go through for everything else. Congress did a similar thing in 2014.

Either way, it looks like the government is buying itself some time. And while that’s possibly necessary to avoid shutdown, delaying the shutdown deadline makes the Republican Party’s already full calendar even fuller, distracting lawmakers from tax reform and health care.

Democrats may not have control of the House or the Senate, but when it comes to appropriating funds for the government, they have a lot of leverage. Because the minority party can block funding in a filibuster, Republicans need Democrats — at least in the Senate — to sign on to their spending agenda.

Unlike President Trump’s Cabinet (and now Supreme Court) nominations, which only needed a simple majority of 51 votes, Republican senators will need 60 votes to end debate on the appropriations bill and get it passed — which means they need to get their party in line plus eight Democrats on their side.

And the Republicans have already been warned; Minority Leader Chuck Schumer and fellow Senate leaders told Republicans that any attempt to pass funding for the border wall or other “poison pills” like defunding Planned Parenthood in the 2017 appropriations bill would be met with unified Democratic resistance — which would result in a shutdown.

“We believe it would be inappropriate to insist on the inclusion of such funding in a must-pass appropriations bill that is needed for the Republican majority in control of the Congress to avert a government shutdown so early in President Trump’s Administration,” the Senate Democratic leadership team wrote in a letter addressed to Senate Majority Leader Mitch McConnell on March 13.

The White House has asked for supplemental budget to begin construction on the border wall between the US and Mexico, but Schumer says that’s not going to happen. And Republicans know that unless they want to add a government shutdown to their portfolios, they are going to have to make some concessions.

But in the last week Trump has been throwing around some elbows, saying funding for the wall is a “must” and tweeting that Obamacare is in “serious trouble.” He’s seemingly hinting at a deal that Office of Management and Budget Director Mick Mulvaney put on the table: An exchange of $1 for the insurance subsidy payments under Obamacare for every $1 given to the border wall.

This isn’t the first time Trump has threatened to withhold Obamacare subsidies to get Democrats to work with him. Clearly, it hasn’t worked yet.

There are a lot things Republicans want to do: hike up defense spending, grant Trump’s border wall supplemental budget, defund Planned Parenthood (although House Speaker Paul Ryan has said that belongs in the health care debate), and cut off subsidies to insurance companies core to Obamacare’s functionality.

The problem is that most of those things will be met with a wall of Democratic opposition. That means Republicans will either have to make peace with a shutdown or make concessions to Democrats. It looks as though they’re leaning toward the latter, which would result in an omnibus bill that’s pretty friendly to Democrats.

Huffington Post’s Matt Fuller put it best: “Conservatives inside and outside Congress may soon rightfully ask: How is this deal any different than a bill Republicans would get if Hillary Clinton were president and Democrats controlled Congress?”

There are some areas of possible agreement, like increases in defense funding and a watered-down compromise on border security, possibly to fund more technology — an area which has more bipartisan support.

It will be near impossible for Republican leadership to sell this to the entirety of its conference — especially once conservatives realize just how much their party has to concede. The irony there is that the more Republican leadership realizes it will lose conservative votes in its own party, the more it will have to rely on Democrats to avoid a shutdown.

The White House was pretty hands-off in the appropriations deal-making process until the final weeks. As with all bills, the final say is with President Donald Trump. He has to decide whether or not he will sign anything short of his campaign demands. Members of his administration have indicated the White House doesn’t want a shutdown either, but it hasn’t stopped them from making a final push.

“We expect a massive increase in military spending. We expect money for border security in this bill,” Chief of Staff Reince Priebus said on NBC’s Meet the Press. “And it ought to be. Because the president won overwhelmingly. And everyone understands the border wall was part of it.”

But with an inactive yet chaotic 100 days of Trump’s presidency coming to a close, adding a federal shutdown doesn’t seem to be a direction Republicans want to take.

Correction: In an editing error a previous version of this story erroneously claimed the government had only shut down twice in history. It has shut down 18 times. We regret the error.