WASHINGTON (Reuters) – Republican efforts to overhaul or repeal Obamacare collapsed in the U.S. Senate on Tuesday, dealing a sharp setback to President Donald Trump and the Republican Party’s seven-year quest to kill former President Barack Obama’s signature healthcare law.

The disarray in the Republican-controlled Senate rattled financial markets as it cast doubt on the chances of getting Trump’s other domestic policy priorities, such as tax reform, through a divided Congress.

Trump said he was disappointed by the failure and suggested he might let the insurance markets created under Obamacare go under and then try to work with Democrats on a rescue.

“We’re probably in that position where we’ll just let Obamacare fail,” Trump told reporters at the White House. “We will let Obamacare fail, and then the Democrats are going to come to us.”

U.S. Senate Republican leader Mitch McConnell had announced a vote on a straight repeal of Obamacare, which would take effect in two years, after it became clear on Monday night that he did not have enough support to pass an overhaul of the healthcare law.

But the new approach unraveled within hours. Moderate Republican Senators Shelley Moore Capito of West Virginia, Susan Collins of Maine and Lisa Murkowski of Alaska quickly announced they would not back repeal. With Democrats united in opposition, Republicans can only afford to lose two votes to pass the measure in the Senate, where they have a slim 52-48 majority.

“I do not think that it’s going to be constructive to repeal a law that at this point is so interwoven within our healthcare system and then hope that over the next two years we will come up with some kind of replacement,” Collins told reporters.

Obamacare has boosted the number of Americans with health insurance through mandates on individuals and employers, and income-based subsidies. About 20 million Americans gained insurance coverage through the law.

Republican senators debated over lunch on Tuesday whether to go ahead with the repeal vote, which McConnell said afterward would occur “in the very near future.”

“This has been a very, very challenging experience for all of us,” McConnell said, adding that the chamber needed to move on to issues like tax reform and a spending package to bolster the country’s infrastructure.

As the healthcare bill collapsed in the Senate, leaders in the Republican-controlled House of Representatives unveiled a budget plan putting a proposed tax code overhaul on the same partisan procedural path that led to the anti-Obamacare initiative’s chaotic downfall.

Republicans had hoped to finish with healthcare before an upcoming August recess so they could tackle a wide-ranging rewrite of the U.S. tax code in September. Separate talks on taxes appear unlikely to reach Trump’s pledge to reduce the corporate tax rate to 15 percent from 35 percent.

But their failure exposed the sharp divide within Republicans’ own ranks, with moderates concerned the healthcare bill’s Medicaid cuts would take insurance away from millions of low-income Americans while conservatives backed the cuts and wanted even more dramatic changes to Obamacare.

The U.S. dollar stumbled to a 10-month low against a basket of currencies and U.S. Treasury yields fell after the fresh setback to the healthcare bill raised investors’ doubts about Trump’s ability to enact tax cuts and infrastructure spending. Reaction in the stock market was muted, and analysts said the expectation for business-friendly legislation out of Washington is all but priced out of the stock market.

“The healthcare hurdle pushes everything in Trump’s agenda to 2018,” said Art Hogan, chief market strategist at Wunderlich Securities in New York.

Trump vowed that the healthcare effort was not dead. In an early morning Twitter message, he said, “We were let down by all of the Democrats and a few Republicans. Most Republicans were loyal, terrific & worked really hard. We will return!”

Trump had pushed hard to get a bill to repeal and replace Obamacare through the U.S. House of Representatives in May and celebrated the victory with lawmakers on the White House lawn. But with polls showing the Republican bill was unpopular, he later called it “mean” and did little to convince Republican senators to get a deal. Vice President Mike Pence said Trump had supported the move to vote on a straight repeal of Obamacare.

“Inaction is not an option,” Pence said at the National Retail Federation Conference in Washington. “Congress needs to step up, Congress needs to do their job, and Congress needs to do their job now.”

In crafting a replacement, Republicans ran up against Obamacare’s growing popularity. A Washington Post-ABC News poll published on Sunday showed Americans preferred it over the Republican alternative by a 2-1 margin.

Senate Democratic leader Chuck Schumer urged Republicans to start over and work with Democrats. Democratic Senator Patty Murray, the leading Democrat on the Senate health committee, said in an interview with Reuters that a bipartisan effort could help stabilize insurance markets.

She said a bipartisan effort to fund cost-sharing subsidies that help cover premiums, deductibles and other medical expenses for about 7 million people who purchase health insurance on the individual market would “send a strong message to the market” and “create some stabilization that is much needed.”

Within hours of the bill’s failure, Republican U.S. Senate Health Committee Chairman Lamar Alexander said he will set hearings in the next few weeks on how to stabilize the individual insurance markets.

Orrin Hatch, the Republican chair of the U.S. Senate Finance Committee, said on the Senate floor that the failure could mean Congress will have to bail out insurance markets “probably before the end of 2017.”

Shelving the current bill means that insurers again face uncertainty about whether the administration will cut off funding for the subsidies that make Obamacare individual plans affordable, putting 2018 coverage and long-term planning at risk.

For hospitals, the move relieves the near-term pressure of massive Medicaid reform, but the long-term plan for federal spending for states’ Medicaid expansion is now murky.

The American Medical Association, which represents doctors, called on Congress to start a bipartisan effort and to stabilize the individual health insurance marketplace.